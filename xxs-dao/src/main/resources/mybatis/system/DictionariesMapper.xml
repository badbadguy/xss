<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="DictionariesMapper">

    <resultMap type="Dictionaries" id="dictResultMap">
        <id column="DICTIONARIES_ID" property="DICTIONARIES_ID"/>
        <result column="NAME" property="NAME"/>
        <result column="PARENT_ID" property="PARENT_ID"/>
    </resultMap>

    <!--表名 -->
    <sql id="tableName">
		SYS_DICTIONARIES
	</sql>

    <!-- 字段 -->
    <sql id="Field">
		NAME,	
		NAME_EN,	
		BIANMA,	
		ORDER_BY,	
		PARENT_ID,	
		BZ,	
		TBSNAME,	
		DICTIONARIES_ID
	</sql>

    <!-- 字段值 -->
    <sql id="FieldValue">
		#{NAME},	
		#{NAME_EN},	
		#{BIANMA},	
		#{ORDER_BY},	
		#{PARENT_ID},	
		#{BZ},	
		#{TBSNAME},	
		#{DICTIONARIES_ID}
	</sql>

    <!-- 新增-->
    <insert id="save" parameterType="pd">
        insert into
        <include refid="tableName"></include>
        (
        <include refid="Field"></include>
        ) values (
        <include refid="FieldValue"></include>
        )
    </insert>

    <!-- 删除-->
    <delete id="delete" parameterType="pd">
        delete from
        <include refid="tableName"></include>
        where
        DICTIONARIES_ID = #{DICTIONARIES_ID}
    </delete>

    <!-- 修改 -->
    <update id="edit" parameterType="pd">
        update
        <include refid="tableName"></include>
        set
        NAME = #{NAME},
        NAME_EN = #{NAME_EN},
        ORDER_BY = #{ORDER_BY},
        BZ = #{BZ},
        TBSNAME = #{TBSNAME},
        DICTIONARIES_ID = DICTIONARIES_ID
        where
        DICTIONARIES_ID = #{DICTIONARIES_ID}
    </update>

    <!-- 通过ID获取数据 -->
    <select id="findById" parameterType="pd" resultType="pd">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        where
        DICTIONARIES_ID = #{DICTIONARIES_ID}
    </select>

    <!-- 通过编码获取数据 -->
    <select id="findByBianma" parameterType="pd" resultType="pd">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        where
        BIANMA = #{BIANMA}
    </select>

    <!-- 列表 -->
    <select id="datalistPage" parameterType="page" resultType="pd">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        where
        1=1
        <if test="pd.DICTIONARIES_ID!= null and pd.DICTIONARIES_ID != ''"><!-- 检索 -->
            and PARENT_ID = #{pd.DICTIONARIES_ID}
        </if>
        <if test="pd.keywords != null and pd.keywords != ''"><!-- 关键词检索 -->
            and
            (
            NAME LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
            or
            NAME_EN LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
            or
            BIANMA LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
            )
        </if>
        order by ORDER_BY
    </select>

    <!-- 通过ID获取其子级列表 -->
    <select id="listSubDictByParentId" parameterType="String" resultMap="dictResultMap">
        select
        <include refid="Field"></include>
        from
        <include refid="tableName"></include>
        where
        PARENT_ID = #{parentId}
    </select>

    <!-- 排查表检查是否被占用 -->
    <select id="findFromTbs" parameterType="pd" resultType="pd">
		select
			count(*) zs
		from 
			${thisTable}
		where
			BIANMA = #{BIANMA}
	</select>

    <select id="findByParentId" parameterType="string" resultType="pd">
		SELECT DICTIONARIES_ID ,`NAME`, BIANMA  FROM `sys_dictionaries` WHERE `PARENT_ID` = #{pid}
	</select>

    <!-- 1.0版 -->
    <select id="findByParentId1" parameterType="string" resultType="pd">
		SELECT  dictionaries_id, name FROM `sys_dictionaries` WHERE `PARENT_ID` = #{pid}
	</select>

    <select id="findByBankName" parameterType="page" resultType="pd">
		SELECT NAME FROM `sys_dictionaries` WHERE PARENT_ID='39b6c83d17fa47bdbf1e87ab6611c1bf'
	</select>

    <select id="findByName" parameterType="String" resultType="String">
		SELECT DICTIONARIES_ID FROM `sys_dictionaries` WHERE NAME LIKE CONCAT(CONCAT('%', #{NAME}),'%')
	</select>

    <!--公益服务类型-->
    <select id="Public_Service_Entrance" parameterType="String" resultType="pd">
		 SELECT  dictionaries_id,
		 name,
		  parent_id
		 FROM
		 `sys_dictionaries`
		 WHERE PARENT_ID='7fa9cbb00a994473b136a27c2ab5260f'

	</select>


    <!--通过ID获取培训服务分类-->
    <select id="classification" parameterType="String" resultType="pd">
		 SELECT dictionaries_id,
		 name,
		  parent_id
		 FROM
		 `sys_dictionaries`
		 WHERE PARENT_ID='0afa754c8e2f40b29c26be39094ece1d'
	</select>

    <!--政府新闻发布-->
    <select id="Government_Press_Releases" resultType="pd">
		 SELECT  dictionaries_id,
		 name,
		parent_id
		 FROM
		 `sys_dictionaries`
		 WHERE PARENT_ID='03d03f50a0ba4f4b97bca77a672956d1'
	</select>

    <select id="getGoodsNewsType" resultType="pd">
		 SELECT dictionaries_id,
		 name,
		 parent_id
		 FROM
		 `sys_dictionaries`
		 WHERE parent_id='a08d5381680a4de086482bd12c683f2a'
         ORDER BY order_by
	</select>

    <!--查询政府新闻发布管理益农社新增时候的类型项-->
    <select id="getDitemByYns" resultType="pd">
        SELECT dictionaries_id,`name`
		FROM `sys_dictionaries`
		WHERE dictionaries_id = '850abba56e45482582c45970dab4d4d0'
        ORDER BY order_by
    </select>
</mapper>